@using Capstone.Web.Models
@model List<ItineraryPlacesModel>

@{
    ViewBag.Title = "UserDashboard";
    Layout = "~/Views/Shared/_Layout.cshtml";
    List<int> order = new List<int>();

}



<script src="https://cdn.rawgit.com/vast-engineering/jquery-popup-overlay/1.7.13/jquery.popupoverlay.js"></script>
<script type="text/javascript">
    window.onload = function () {
        loadMap();
    }
</script>


<div class="dashboard-hero jumbotron">
    <div class="container text-center">
        <h1 class="h1 text-uppercase hero-text-drop-shadow">User Dashboard</h1>

    </div>
</div>
<div class="container">
    <div class="row">
        <div class="col-xs-12 text-center">
            <h2>User Dashboard</h2>
            <button id="my_popup_open">Create Itinerary</button>
            <div id="my_popup">
                @Html.Action("CreateItinPartial")
                <button class="my_popup_close">Close</button>
            </div>
        </div>

    </div>
    <div class="row">
        <div class="col-xs-12">
            @for (int i = 0; i < Model.Count; i++)
            {  <div>
                    <h3>
                        @Model[i].Itinerary.Name
                    </h3>
                    <form action="@Url.Action("DeleteItinerary", "Home", new { itineraryId = Model[i].Itinerary.Id })" method="post">
                        <button>Delete Itinerary</button>
                    </form>
                    <form>
                        <input type="submit" name="save" value="Save Itinerary" formaction="@Url.Action("EditUserItinerary", "Home", new { itineraryId = Model[i].Itinerary.Id })" formmethod="post" />
                        <div class="container">
                            <div id="sortable" class="row itin-container test">
                                @{ var counter = 0; }
                                @foreach (var t in Model[i].Places)
                                {
                                    <div>
                                        <input type="hidden" name="placeIds[@counter]" value="@t.Id" />
                                        <img src="@Url.Content("~/Content/places-pics/" + t.PlaceName + ".jpg")" />
                                        <h4>@t.PlaceName</h4>
                                        <p>@t.StreetAddress @t.City , @t.State @t.Zip</p>
                                        <p>@t.Detail</p>
                                        <form action="@Url.Action("DeletePlaceFromItinerary", "Home", new { placeId = t.Id, itineraryId = Model[i].Itinerary.Id })" method="post">
                                            <input type="submit" name="remove" value="Remove from Itinerary" formaction="@Url.Action("DeletePlaceFromItinerary", "Home", new { placeId = t.Id, itineraryId = Model[i].Itinerary.Id })" formmethod="post" />
                                        </form>
                                        <hr />
                                    </div>
                                    counter++;
                                }
                            </div>
                        </div>
                    </form>
                </div>
                                    }
        </div>
    </div>
    <div class="col-xs-12">
        <div class="row">
            <div class="col-xs-12">
                <div id="dvMap" style="width: 50%; height: 500px">
                </div>
            </div>
        </div>

    </div>

</div>

<br />


